Homework 2
================
Yuanxin Zhang

This is my solution to Homework 2.

``` r
library(tidyverse)
```

    ## ── Attaching packages ────────────────────────────────────────────────────────── tidyverse 1.3.0 ──

    ## ✓ ggplot2 3.3.2     ✓ purrr   0.3.4
    ## ✓ tibble  3.0.3     ✓ dplyr   1.0.2
    ## ✓ tidyr   1.1.2     ✓ stringr 1.4.0
    ## ✓ readr   1.3.1     ✓ forcats 0.5.0

    ## ── Conflicts ───────────────────────────────────────────────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(readxl)
```

# Question 1

### Part 1: Read and clean the Mr. Trash Wheel sheet

1)  Specify the sheet in the Excel file and to omit non-data entries
2)  Use reasonable variable names
3)  Omit rows that do not include dumpster-specific data
4)  Round the number of sports balls to the nearest integer and converts
    the result to an integer variable

<!-- end list -->

``` r
trashwheel_df = 
    read_xlsx(
        "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
        sheet = "Mr. Trash Wheel",
        range = cell_cols("A:N")) %>% 
    janitor::clean_names() %>% 
    drop_na(dumpster) %>% 
    mutate(
        sports_balls = round(sports_balls),
        sports_balls = as.integer(sports_balls)
    )
```

### Part 2: Read and clean precipitation data for 2017 and 2018

1)  For each, omit rows without precipitation data and add a variable
    year.

<!-- end list -->

``` r
precip_2017 = 
    read_xlsx(
        "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
        sheet = "2017 Precipitation",
        skip = 1) %>% 
    janitor::clean_names() %>% 
    drop_na(month) %>% 
    mutate(year = 2017) %>% 
    relocate(year)

precip_2018 = 
    read_xlsx(
        "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
        sheet = "2018 Precipitation",
        skip = 1) %>% 
    janitor::clean_names() %>% 
    drop_na(month) %>% 
    mutate(year = 2018) %>% 
    relocate(year)
```

2)  Combine precipitation datasets and convert month to a character
    variable.

<!-- end list -->

``` r
month_df = 
    tibble(
        month = 1:12,
        month_name = month.name
    )

precip_df = 
    bind_rows(precip_2017, precip_2018)

precip_df =
    left_join(precip_df, month_df, by = "month")
```

### Part 3: Write a paragraph about these data

Mr. Trash Wheel dataset contains information from the Mr. Trash Wheel
trash collector in Baltimore, Maryland. As trash enters the inner
harbor, the trash wheel collects that trash, and stores it in a
dumpster. The dataset contains information on year, month, and trash
collected, include some specific kinds of trash. There are a total of
344 rows in our final dataset. The median number of sports balls found
in a dumpster in 2017 was 8

Additional data sheets include month precipitation data, in which:

  - There are a total of 24 rows in our final dataset that combine
    precipitation data for 2017 and 2018.
  - The total precipitation in 2018 was 70.33 inches.

# Question 2

### Part 1: Read and clean NYC Transit data

1)  Retain line, station, name, station latitude / longitude, routes
    served, entry, vending, entrance type, and ADA compliance

<!-- end list -->

``` r
transit_df = 
    read_csv(
        "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
    janitor::clean_names() %>%
  mutate_at(vars(route1:route11), as.character) %>%
  pivot_longer(
    route1:route11,
    names_to = "route_number",
    names_prefix = "route",
    values_to = "route_name"
  ) %>%
  drop_na(route_name) %>%
  select(line:station_longitude, route_number, route_name, entry, vending, entrance_type, ada)
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_double(),
    ##   Route9 = col_double(),
    ##   Route10 = col_double(),
    ##   Route11 = col_double(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

2)  Convert the entry variable from character (YES vs NO) to a logical
    variable.
